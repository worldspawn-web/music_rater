<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Music Rater</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <nav class="navigation">
      <div class="nav-brand">
        <svg
          class="logo-icon"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            d="M9 18V5l12-2v13M9 13c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"
          />
        </svg>
        <span class="brand-text">Music Rater</span>
      </div>
      <div class="nav-tabs">
        <button class="nav-tab active" data-tab="current-track">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="10" />
            <polygon points="10 8 16 12 10 16 10 8" />
          </svg>
          <span>Текущий трек</span>
        </button>
        <button class="nav-tab" data-tab="track-ratings">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
            />
          </svg>
          <span>Треки</span>
        </button>
        <button class="nav-tab" data-tab="artist-ratings">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
            <circle cx="12" cy="7" r="4" />
          </svg>
          <span>Исполнители</span>
        </button>
        <button class="nav-tab" data-tab="genre-ratings">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect x="3" y="3" width="7" height="7" />
            <rect x="14" y="3" width="7" height="7" />
            <rect x="14" y="14" width="7" height="7" />
            <rect x="3" y="14" width="7" height="7" />
          </svg>
          <span>Жанры</span>
        </button>
        <button class="nav-tab" data-tab="vibe-ratings">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
          </svg>
          <span>Настроения</span>
        </button>
      </div>
    </nav>

    <main class="main-content">
      <!-- Added dynamic animated background -->
      <section class="tab-content active" id="current-track">
        <div class="dynamic-background" id="dynamic-background">
          <div class="gradient-orb orb-1"></div>
          <div class="gradient-orb orb-2"></div>
          <div class="gradient-orb orb-3"></div>
        </div>

        <div class="hero-section">
          <div class="album-artwork">
            <div class="artwork-wrapper">
              <img
                id="album-cover"
                class="cover-image"
                alt="Album Cover"
                crossorigin="anonymous"
              />
              <div id="no-cover" class="no-cover-placeholder">
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                  <circle cx="8.5" cy="8.5" r="1.5" />
                  <polyline points="21 15 16 10 5 21" />
                </svg>
                <span>Нет обложки</span>
              </div>
            </div>
          </div>

          <div class="track-details">
            <div class="track-info">
              <h1 id="track-title" class="track-title">Загрузка...</h1>
              <p id="track-artist" class="track-artist"></p>
              <p id="track-album" class="track-album"></p>
            </div>

            <!-- Added glass-card class for glassmorphism effect -->
            <div class="metadata-section glass-card">
              <div class="genre-selector">
                <label for="genre-select" class="input-label">Жанр</label>
                <!-- Replaced native select with custom genre dropdown -->
                <div class="custom-genre-dropdown" id="genre-dropdown">
                  <button class="genre-trigger" id="genre-trigger">
                    <span class="genre-trigger-text" id="genre-trigger-text"
                      >Выберите жанр</span
                    >
                    <svg
                      class="genre-trigger-icon"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                  </button>
                </div>
                <!-- Hidden input to store selected genre value -->
                <input type="hidden" id="genre-select" value="" />
              </div>

              <div class="vibe-selector">
                <label class="input-label">Настроение</label>
                <div class="vibe-grid" id="vibe-buttons">
                  <!-- Vibe buttons will be loaded dynamically by loadVibeButtons() -->
                  <button class="vibe-chip add-vibe" id="add-vibe-button">
                    <svg
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <line x1="12" y1="5" x2="12" y2="19" />
                      <line x1="5" y1="12" x2="19" y2="12" />
                    </svg>
                  </button>
                </div>
                <div class="input-group hidden" id="vibe-input">
                  <input
                    type="text"
                    id="new-vibe-name"
                    class="text-input"
                    placeholder="Название"
                  />
                  <input
                    type="color"
                    id="new-vibe-color"
                    class="color-input"
                    value="#10b981"
                  />
                  <button id="save-vibe-button" class="primary-button">
                    Сохранить
                  </button>
                </div>
              </div>
            </div>

            <!-- Added glass-card class for glassmorphism effect -->
            <div class="rating-section glass-card">
              <h2 class="section-title">Оцените трек</h2>
              <div class="rating-grid">
                <button class="rating-button" data-rating="1">1</button>
                <button class="rating-button" data-rating="2">2</button>
                <button class="rating-button" data-rating="3">3</button>
                <button class="rating-button" data-rating="4">4</button>
                <button class="rating-button" data-rating="5">5</button>
                <button class="rating-button" data-rating="6">6</button>
                <button class="rating-button" data-rating="7">7</button>
                <button class="rating-button" data-rating="8">8</button>
                <button class="rating-button" data-rating="9">9</button>
                <button class="rating-button" data-rating="10">10</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="tab-content" id="track-ratings">
        <div class="ratings-container">
          <header class="ratings-header">
            <h1 class="ratings-title">Рейтинги треков</h1>
            <p class="ratings-subtitle">Ваши любимые композиции</p>
          </header>

          <!-- Vertical top 3 cards with special effects -->
          <div class="top-three-container" id="track-top-three">
            <!-- Will be populated by JS -->
          </div>

          <!-- Regular table for positions 4-100 -->
          <div class="ratings-table-wrapper" id="track-ratings-table">
            <!-- Will be populated by JS -->
          </div>

          <div class="empty-state hidden" id="track-ratings-empty">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M9 18V5l12-2v13M9 13c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"
              />
            </svg>
            <p>Пока нет оцененных треков</p>
          </div>
        </div>
      </section>

      <section class="tab-content" id="artist-ratings">
        <div class="ratings-container">
          <header class="ratings-header">
            <h1 class="ratings-title">Рейтинги исполнителей</h1>
            <p class="ratings-subtitle">Ваши любимые артисты</p>
          </header>

          <!-- Vertical top 3 cards -->
          <div class="top-three-container" id="artist-top-three">
            <!-- Will be populated by JS -->
          </div>

          <!-- Regular table for positions 4-100 -->
          <div class="ratings-table-wrapper" id="artist-ratings-table">
            <!-- Will be populated by JS -->
          </div>

          <div class="empty-state hidden" id="artist-ratings-empty">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
              <circle cx="12" cy="7" r="4" />
            </svg>
            <p>Пока нет оцененных исполнителей</p>
          </div>
        </div>
      </section>

      <section class="tab-content" id="genre-ratings">
        <div class="ratings-container">
          <header class="ratings-header">
            <h1 class="ratings-title">Рейтинги жанров</h1>
            <p class="ratings-subtitle">Ваши любимые жанры</p>
          </header>

          <!-- Vertical top 3 cards -->
          <div class="top-three-container" id="genre-top-three">
            <!-- Will be populated by JS -->
          </div>

          <!-- Regular table for positions 4-100 -->
          <div class="ratings-table-wrapper" id="genre-ratings-table">
            <!-- Will be populated by JS -->
          </div>

          <div class="empty-state hidden" id="genre-ratings-empty">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <rect x="3" y="3" width="7" height="7" />
              <rect x="14" y="3" width="7" height="7" />
              <rect x="14" y="14" width="7" height="7" />
              <rect x="3" y="14" width="7" height="7" />
            </svg>
            <p>Пока нет оцененных жанров</p>
          </div>
        </div>
      </section>

      <section class="tab-content" id="vibe-ratings">
        <div class="ratings-container">
          <header class="ratings-header">
            <h1 class="ratings-title">Рейтинги настроений</h1>
            <p class="ratings-subtitle">Ваши любимые настроения</p>
          </header>

          <!-- Vertical top 3 cards -->
          <div class="top-three-container" id="vibe-top-three">
            <!-- Will be populated by JS -->
          </div>

          <!-- Regular table for positions 4-100 -->
          <div class="ratings-table-wrapper" id="vibe-ratings-table">
            <!-- Will be populated by JS -->
          </div>

          <div class="empty-state hidden" id="vibe-ratings-empty">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
            </svg>
            <p>Пока нет оцененных настроений</p>
          </div>
        </div>
      </section>
    </main>

    <!-- Moved genre dropdown panel and backdrop here for proper z-index stacking -->
    <div class="genre-dropdown-backdrop hidden" id="genre-backdrop"></div>
    <div class="genre-dropdown-panel hidden" id="genre-panel">
      <div class="genre-search-wrapper">
        <svg
          class="genre-search-icon"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
        <input
          type="text"
          class="genre-search-input"
          id="genre-search"
          placeholder="Поиск жанра..."
        />
      </div>

      <div class="genre-sort-buttons">
        <button class="genre-sort-btn active" data-sort="count">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M3 6h18M7 12h10M11 18h2"></path>
          </svg>
          По популярности
        </button>
        <button class="genre-sort-btn" data-sort="alpha">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M4 6h16M4 12h13M4 18h10"></path>
          </svg>
          По алфавиту
        </button>
      </div>

      <div class="genre-list" id="genre-list">
        <!-- Will be populated by JS -->
      </div>

      <div class="genre-add-section">
        <button class="genre-add-btn" id="genre-add-btn">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Добавить новый жанр
        </button>
        <div class="genre-add-input hidden" id="genre-add-input">
          <input
            type="text"
            class="text-input"
            id="new-genre-name"
            placeholder="Название жанра"
          />
          <button class="primary-button" id="save-new-genre">Сохранить</button>
        </div>
      </div>
    </div>

    <script src="renderer.js"></script>
  </body>
</html>
